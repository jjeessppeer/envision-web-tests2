<!-- Settings panel -->
<h5>General settings</h5>
<div class="row row-margin">
  <div class="input-group col-sm-6">
    <div class="input-group-prepend">
      <label class="input-group-text" for="bandSelection">Selected band</label>
    </div>
    <select class="custom-select" id="bandSelection">
      <option selected>final</option>
      <option>1</option>
    </select>
  </div>
</div>

<h5 class="border-bottom">Volume rendering settings</h5>
<div class="row row-margin">
  <div class="input-group col-sm-7">
    <div class="input-group-prepend">
      <label class="input-group-text" for="shadingModeSelection">Shading mode</label>
    </div>
    <select class="custom-select" id="shadingModeSelection"">
      <option selected>No shading</option>
      <option>Blinn Phong</option>
    </select>
  </div>
</div>
<div class="form-row row-margin input-group">
  <div class="input-group-prepend col-sm-2">
    <label class="input-group-text">Background</label>
  </div>
  <input class="form-control col-sm-1" id="backgroundColor1" type="color" value="#ffffff" required>
  <input class="form-control col-sm-1" id="backgroundColor2" type="color" value="#000000" required>
  <select class="custom-select col-sm-3" id="backgroundStyleSelection" onchange="console.log('bg style selected')">
    <option selected>Linear gradient</option>
    <option>other option</option>
  </select>
</div>
<h6>Transfer Function</h6>
<div class="form-check">
  <input type="checkbox" class="form-check-input" id="transperancyCheckbox" onclick="console.log('Transperancy toggled')"
    checked>
  <label class="form-check-label" for="transperancyCheckbox">Toggle transperancy before first point</label>
</div>

<div id="tfPoints">
  <div class="row row-margin">
    <form class="needs-validation col-sm-8" id="tfAdder" novalidate>
      <div class="input-group" id="addTFGroup">
        <input type="text" class="form-control" placeholder="value [0-1]" id="tfValue" required>
        <input type="text" class="form-control" placeholder="alpha [0-1]" id="tfAlpha" required>
        <input class="form-control" type="color" value="#563d7c" required>
        <div class="input-group-append">
          <button class="btn btn-primary" type="submit" id="tfAddButton">+</button>
        </div>
      </div>
    </form>
  </div>
</div>

<div class="row row-margin">
  <div class="btn-group col-sm-8" role="group" aria-label="Basic example">
    <button type="button" class="btn btn-secondary">Save transfer funciton</button>
    <button type="button" class="btn btn-secondary">Load transfer funciton</button>
  </div>
</div>


<script>
    $(document).ready(function(){
      console.log("Charge control element loaded")
      $("#bandSelection").on("change", bandSelected)
      $("#shadingModeSelection").on("change", shadingModeSelected)

      $("#tfAdder").on("submit", addTfPoint);

      // Restricts input for each element in the set of matched elements to the given inputFilter.
      $.fn.inputFilter = function (inputFilter) {
        return this.on("input keydown keyup mousedown mouseup select contextmenu drop", function () {
          if (inputFilter(this.value)) {
            this.oldValue = this.value;
            this.oldSelectionStart = this.selectionStart;
            this.oldSelectionEnd = this.selectionEnd;
          } else if (this.hasOwnProperty("oldValue")) {
            this.value = this.oldValue;
            this.setSelectionRange(this.oldSelectionStart, this.oldSelectionEnd);
          }
        });
      };

      // Restrict input to digits by using a regular expression filter.
      $("#tfValue").inputFilter(function (value) {
        return /^(0?(\.\d*)?|1(\.0*)?)?$/.test(value) //allow float in range 0 to 1, or nothing.
      });
      $("#tfAlpha").inputFilter(function (value) {
        return /^(0?(\.\d*)?|1(\.0*)?)?$/.test(value) //allow float in range 0 to 1, or nothing.
      });

    });
</script>